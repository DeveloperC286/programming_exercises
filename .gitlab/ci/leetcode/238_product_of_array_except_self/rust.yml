238_product_of_array_except_self-rust-formatting:
  stage: formatting
  image: rust
  before_script:
    - rustup component add rustfmt
  script:
    - cd leetcode/238_product_of_array_except_self/rust
    - cargo fmt --all -- --check
  rules:
    - if: $CI_MERGE_REQUEST_ID


238_product_of_array_except_self-rust-linting:
  stage: linting
  image: rust
  before_script:
    - rustup component add clippy
  script:
    - cd leetcode/238_product_of_array_except_self/rust
    - cargo clippy --verbose --workspace --all-targets -- -D warnings
    - cargo clippy --verbose --workspace --all-targets --all-features -- -D warnings
    - cargo clippy --verbose --workspace --all-targets --no-default-features -- -D warnings
  rules:
    - if: $CI_MERGE_REQUEST_ID


238_product_of_array_except_self-rust-compiling:
  stage: compiling
  image: rust
  script:
    - cd leetcode/238_product_of_array_except_self/rust
    - cargo build --verbose --workspace
    - cargo build --verbose --workspace --all-features
    - cargo build --verbose --workspace --no-default-features
  rules:
    - if: $CI_MERGE_REQUEST_ID
    - if: $CI_COMMIT_BRANCH == "master"


238_product_of_array_except_self-rust-unit-testing:
  stage: unit-testing
  image: rust
  script:
    - cd leetcode/238_product_of_array_except_self/rust
    - cargo test --verbose --workspace
    - cargo test --verbose --workspace --all-features
    - cargo test --verbose --workspace --no-default-features
  rules:
    - if: $CI_MERGE_REQUEST_ID
    - if: $CI_COMMIT_BRANCH == "master"
